{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/pierfrancescodorsogna/Documents/PROJECTS/adventure-cap_italy_st/elements/OwnedBusiness/OwnedBusiness.js\";\nimport React, { useState, useEffect } from 'react';\nimport styles from './OwnedBusiness.module.css';\n/* MODELS */\n\nimport Texts from '../../models/Texts';\n/* ELEMENTS */\n\nimport Button from '../Button';\nimport PropTypes from 'prop-types';\nimport { allFirstCharsCapital } from '../../controllers/UtilsManager';\n/**\n *\n * @param id\n * @param name\n * @param level\n * @param hasManager\n * @param secondsForGoodGeneration\n * @param revenue\n * @param collectMoney\n * @param upgradeCost\n * @param upgradeBusiness\n * @param managerCost\n * @param buyManager\n * @param updateOnGoingTransaction\n * @param img\n * @param oldSecondsToElapse\n * @returns {*}\n * @constructor\n */\n\nconst OwnedBusiness = ({\n  id,\n  name,\n  level,\n  hasManager,\n  secondsForGoodGeneration,\n  revenue,\n  collectMoney,\n  upgradeCost,\n  upgradeBusiness,\n  managerCost,\n  buyManager,\n  updateOnGoingTransaction,\n  img,\n  oldSecondsToElapse\n}) => {\n  const {\n    0: isDisabled,\n    1: setIsDisabled\n  } = useState(hasManager);\n  const {\n    0: manager,\n    1: setManager\n  } = useState(hasManager);\n  const {\n    0: progress,\n    1: setProgress\n  } = useState(oldSecondsToElapse / secondsForGoodGeneration / 2 * 100);\n\n  const collectHelper = () => {\n    // collect money and disable button for secondsForGoodGeneration\n    collectMoney();\n    setIsDisabled(true); // prepare business to collect another one meanwhile fill the progress bar\n\n    let currentProgress = progress;\n    const intervalToProgress = setInterval(() => {\n      currentProgress += 0.5 / secondsForGoodGeneration * 100;\n      setProgress(currentProgress);\n      updateOnGoingTransaction(id, currentProgress / 100 * secondsForGoodGeneration * 2);\n\n      if (currentProgress > 100) {\n        clearInterval(intervalToProgress);\n        setIsDisabled(false);\n        setProgress(0);\n        updateOnGoingTransaction(id, 0);\n      }\n    }, 500);\n  };\n\n  const managerHelper = () => {\n    if (buyManager()) {\n      setManager(true);\n    }\n  }; // once the business is render\n\n\n  useEffect(() => {\n    let updateOnGoingTransactionTimer;\n\n    if (manager) {\n      let currentProgress = progress;\n      updateOnGoingTransactionTimer = setInterval(() => {\n        currentProgress += 0.5 / secondsForGoodGeneration * 100;\n        updateOnGoingTransaction(id, currentProgress / 100 * secondsForGoodGeneration * 2);\n        setProgress(currentProgress);\n\n        if (currentProgress > 100) {\n          collectMoney();\n          updateOnGoingTransaction(id, 0);\n          currentProgress = 0;\n          setProgress(currentProgress);\n        }\n      }, 500);\n    } else {\n      if (progress !== 0) collectHelper();\n    }\n\n    return () => {\n      clearInterval(updateOnGoingTransactionTimer);\n    };\n  }, [manager]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.businessCard,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.businessCardHead,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: img,\n          alt: `Img for: ${id}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [name, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 21\n          }, this), \" \", allFirstCharsCapital(Texts.en.LEVEL), \" \", level, \" / 200 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.businessCardBody,\n      children: [/*#__PURE__*/_jsxDEV(\"progress\", {\n        className: styles.progress,\n        max: \"100\",\n        value: progress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [hasManager ? null : /*#__PURE__*/_jsxDEV(Button, {\n          disabled: isDisabled,\n          onClick: collectHelper,\n          children: [allFirstCharsCapital(Texts.en.COLLECT), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }, this), \" +$\", revenue]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: upgradeBusiness,\n          children: [allFirstCharsCapital(Texts.en.UPGRADE), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 86\n          }, this), \" \", upgradeCost, \"$\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), hasManager ? null : /*#__PURE__*/_jsxDEV(Button, {\n          onClick: managerHelper,\n          children: [allFirstCharsCapital(Texts.en.BUY_MANAGER), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 90\n          }, this), \" \", managerCost, \"$\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this)]\n  }, \"elem-bought-\" + id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 12\n  }, this);\n};\n\nOwnedBusiness.propTypes = {\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  level: PropTypes.number.isRequired,\n  hasManager: PropTypes.bool.isRequired,\n  secondsForGoodGeneration: PropTypes.number.isRequired,\n  revenue: PropTypes.number.isRequired,\n  collectMoney: PropTypes.func.isRequired,\n  upgradeCost: PropTypes.func.isRequired,\n  upgradeBusines: PropTypes.func.isRequired,\n  managerCost: PropTypes.number.isRequired,\n  buyManager: PropTypes.func.isRequired,\n  updateOnGoingTransaction: PropTypes.func.isRequired,\n  img: PropTypes.string.isRequired,\n  oldSecondsToElapse: PropTypes.number\n};\nexport default OwnedBusiness;","map":{"version":3,"sources":["/Users/pierfrancescodorsogna/Documents/PROJECTS/adventure-cap_italy_st/elements/OwnedBusiness/OwnedBusiness.js"],"names":["React","useState","useEffect","styles","Texts","Button","PropTypes","allFirstCharsCapital","OwnedBusiness","id","name","level","hasManager","secondsForGoodGeneration","revenue","collectMoney","upgradeCost","upgradeBusiness","managerCost","buyManager","updateOnGoingTransaction","img","oldSecondsToElapse","isDisabled","setIsDisabled","manager","setManager","progress","setProgress","collectHelper","currentProgress","intervalToProgress","setInterval","clearInterval","managerHelper","updateOnGoingTransactionTimer","businessCard","businessCardHead","en","LEVEL","businessCardBody","COLLECT","UPGRADE","BUY_MANAGER","propTypes","string","isRequired","number","bool","func","upgradeBusines"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styles from './OwnedBusiness.module.css';\n\n/* MODELS */\nimport Texts from '../../models/Texts';\n\n/* ELEMENTS */\nimport Button from '../Button';\nimport PropTypes from 'prop-types'\nimport { allFirstCharsCapital } from '../../controllers/UtilsManager'\n\n/**\n *\n * @param id\n * @param name\n * @param level\n * @param hasManager\n * @param secondsForGoodGeneration\n * @param revenue\n * @param collectMoney\n * @param upgradeCost\n * @param upgradeBusiness\n * @param managerCost\n * @param buyManager\n * @param updateOnGoingTransaction\n * @param img\n * @param oldSecondsToElapse\n * @returns {*}\n * @constructor\n */\nconst OwnedBusiness =\n  ({\n     id,\n     name,\n     level,\n     hasManager,\n     secondsForGoodGeneration,\n     revenue,\n     collectMoney,\n     upgradeCost,\n     upgradeBusiness,\n     managerCost,\n     buyManager,\n     updateOnGoingTransaction,\n     img,\n     oldSecondsToElapse\n   }) => {\n\n    const [isDisabled, setIsDisabled] = useState(hasManager);\n    const [manager, setManager] = useState(hasManager);\n    const [progress, setProgress] = useState(((oldSecondsToElapse / secondsForGoodGeneration) / 2) * 100);\n\n    const collectHelper = () => {\n\n      // collect money and disable button for secondsForGoodGeneration\n      collectMoney();\n      setIsDisabled(true);\n\n      // prepare business to collect another one meanwhile fill the progress bar\n      let currentProgress = progress;\n      const intervalToProgress = setInterval(() => {\n        currentProgress += (0.5 / secondsForGoodGeneration) * 100;\n        setProgress(currentProgress)\n        updateOnGoingTransaction(id, (currentProgress / 100) * secondsForGoodGeneration * 2);\n\n        if (currentProgress > 100) {\n          clearInterval(intervalToProgress);\n          setIsDisabled(false);\n          setProgress(0);\n          updateOnGoingTransaction(id, 0);\n        }\n      }, 500);\n    }\n\n    const managerHelper = () => {\n      if (buyManager()) {\n        setManager(true);\n      }\n    }\n\n    // once the business is render\n\n    useEffect(() => {\n      let updateOnGoingTransactionTimer;\n\n      if (manager) {\n        let currentProgress = progress;\n        updateOnGoingTransactionTimer = setInterval(() => {\n          currentProgress += (0.5 / secondsForGoodGeneration) * 100;\n          updateOnGoingTransaction(id, (currentProgress / 100) * secondsForGoodGeneration * 2);\n          setProgress(currentProgress);\n          if (currentProgress > 100) {\n            collectMoney();\n            updateOnGoingTransaction(id, 0);\n            currentProgress = 0;\n            setProgress(currentProgress);\n          }\n        }, 500)\n      } else {\n        if (progress !== 0) collectHelper()\n      }\n\n      return () => {\n        clearInterval(updateOnGoingTransactionTimer);\n      }\n    }, [manager])\n\n    return <div key={\"elem-bought-\" + id} className={styles.businessCard}>\n      {/*Business Head*/}\n      <div className={styles.businessCardHead}>\n        <div>\n          {/*Profile Pic*/}\n          <img src={img} alt={`Img for: ${id}`}/>\n        </div>\n        <div>\n          {/*Biz Name & Level*/}\n          <p>{name} <br/> {allFirstCharsCapital(Texts.en.LEVEL)} {level} / 200 </p>\n        </div>\n      </div>\n      {/*Business Body*/}\n      <div className={styles.businessCardBody}>\n        {/*Progress Bar*/}\n        <progress className={styles.progress} max=\"100\" value={progress}/>\n        {/*Button Container*/}\n        <div>\n          {/*Collect Button*/}\n          {hasManager ? null :\n            <Button disabled={isDisabled} onClick={collectHelper}>{allFirstCharsCapital(Texts.en.COLLECT)}\n              <br/> +${revenue}</Button>}\n          {/*Upgrade Button*/}\n          <Button onClick={upgradeBusiness}>{allFirstCharsCapital(Texts.en.UPGRADE)} <br/> {upgradeCost}$</Button>\n          {/*Buy Manager Button*/}\n          {hasManager ? null :\n            <Button onClick={managerHelper}>{allFirstCharsCapital(Texts.en.BUY_MANAGER)} <br/> {managerCost}$</Button>}\n        </div>\n      </div>\n    </div>\n  };\n\nOwnedBusiness.propTypes = {\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  level: PropTypes.number.isRequired,\n  hasManager: PropTypes.bool.isRequired,\n  secondsForGoodGeneration: PropTypes.number.isRequired,\n  revenue: PropTypes.number.isRequired,\n  collectMoney: PropTypes.func.isRequired,\n  upgradeCost: PropTypes.func.isRequired,\n  upgradeBusines: PropTypes.func.isRequired,\n  managerCost: PropTypes.number.isRequired,\n  buyManager: PropTypes.func.isRequired,\n  updateOnGoingTransaction: PropTypes.func.isRequired,\n  img: PropTypes.string.isRequired,\n  oldSecondsToElapse: PropTypes.number,\n}\n\nexport default OwnedBusiness;\n"]},"metadata":{},"sourceType":"module"}